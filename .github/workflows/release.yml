# GitHub Actions å·¥ä½œæµï¼šFlutter å¤šå¹³å°è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ
name: Build and Release App

# è§¦å‘æ¡ä»¶ï¼šå½“æ¨é€ç‰ˆæœ¬æ ‡ç­¾æ—¶æˆ–æ‰‹åŠ¨è§¦å‘
on:
  push:
    tags:
      - "v*"  # åŒ¹é…æ‰€æœ‰ä»¥ v å¼€å¤´çš„æ ‡ç­¾ï¼Œå¦‚ v1.0.0ã€v2.1.3 ç­‰
  workflow_dispatch:  # å…è®¸åœ¨ GitHub Actions é¡µé¢æ‰‹åŠ¨è§¦å‘

# æƒé™è®¾ç½®ï¼šå¿…é¡»æˆäºˆ contents: write æƒé™æ‰èƒ½åˆ›å»º Release
permissions:
  contents: write

jobs:
  # ========================
  # å¹¶è¡Œæ„å»ºæ‰€æœ‰å¹³å°
  # ========================

  build-android:
    name: Build Android
    runs-on: ubuntu-latest  # ä½¿ç”¨ Ubuntu ç¯å¢ƒæ„å»º Android
    outputs:
      # è¾“å‡ºæ„å»ºä¿¡æ¯ï¼ˆå¯é€‰ï¼Œç”¨äºè°ƒè¯•ï¼‰
      artifact-name: android-apk

    steps:
      # 1. æ£€å‡ºä»£ç ï¼šè·å–ä»“åº“çš„æºä»£ç 
      - name: Checkout repository
        uses: actions/checkout@v3

      # 2. è®¾ç½® Java ç¯å¢ƒï¼šAndroid æ„å»ºéœ€è¦ Java 17
      - name: Setup Java environment
        uses: actions/setup-java@v3
        with:
          distribution: 'temurin'  # ä½¿ç”¨ Eclipse Temurin JDKï¼ˆAdoptOpenJDK çš„åˆ†æ”¯ï¼‰
          java-version: '17'       # Flutter 3.x éœ€è¦ Java 17

      # 3. ç¼“å­˜ Gradle ä¾èµ–ï¼šåŠ é€Ÿ Android æ„å»º
      - name: Cache Gradle dependencies
        uses: actions/cache@v3
        with:
          path: |
            ~/.gradle/caches
            ~/.gradle/wrapper
          key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
          restore-keys: |
            ${{ runner.os }}-gradle-

      # 4. ç¼“å­˜ Flutter ä¾èµ–ï¼šåŠ é€Ÿæ„å»º
      - name: Cache Flutter dependencies
        uses: actions/cache@v3
        with:
          path: |
            ~/.pub-cache
            /opt/hostedtoolcache/Flutter
          key: ${{ runner.os }}-flutter-${{ hashFiles('**/pubspec.lock') }}
          restore-keys: |
            ${{ runner.os }}-flutter-

      # 5. è®¾ç½® Flutter ç¯å¢ƒï¼šå®‰è£… Flutter SDK
      - name: Setup Flutter environment
        uses: subosito/flutter-action@v2
        with:
          channel: 'stable'  # ä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆæœ¬çš„ Flutter
          cache: true  # å¯ç”¨ Flutter ç¼“å­˜

      # 6. è·å–é¡¹ç›®ä¾èµ–ï¼šè¿è¡Œ flutter pub get ä¸‹è½½ä¾èµ–åŒ…
      - name: Get Flutter dependencies
        run: flutter pub get

      # 7. [å¯é€‰] è§£ç  Android ç­¾åå¯†é’¥ï¼ˆç”¨äºå‘å¸ƒç­¾åç‰ˆæœ¬ï¼‰
      # å¦‚æœéœ€è¦å‘å¸ƒç­¾åçš„ APKï¼Œéœ€è¦å…ˆé…ç½® GitHub Secretsï¼š
      # - ANDROID_KEYSTORE_BASE64: keystore æ–‡ä»¶çš„ base64 ç¼–ç 
      # - KEY_PASSWORD: keystore å¯†ç 
      # - ALIAS_PASSWORD: alias å¯†ç 
      # - KEY_ALIAS: å¯†é’¥åˆ«å
      - name: Decode Android keystore (if configured)
        run: |
          if [ "${{ secrets.ANDROID_KEYSTORE_BASE64 }}" != "" ]; then
            echo "ğŸ“± Android keystore found, setting up signing configuration"
            echo "${{ secrets.ANDROID_KEYSTORE_BASE64 }}" | base64 --decode > android/app/upload-keystore.jks
            echo "storePassword=${{ secrets.KEY_PASSWORD }}" > android/key.properties
            echo "keyPassword=${{ secrets.ALIAS_PASSWORD }}" >> android/key.properties
            echo "keyAlias=${{ secrets.KEY_ALIAS }}" >> android/key.properties
            echo "storeFile=upload-keystore.jks" >> android/key.properties
          else
            echo "ğŸ“± No Android keystore configured, building unsigned APK"
          fi

      # 8. æ„å»º Android APKï¼šç”Ÿæˆå‘å¸ƒç‰ˆæœ¬çš„ Android å®‰è£…åŒ…
      - name: Build Android APK
        run: |
          echo "ğŸ”¨ Building Android APK..."
          flutter build apk --release
          echo "âœ… Android APK build completed"

      # 9. ä¸Šä¼ æ„å»ºäº§ç‰©ï¼šå°† APK ä¸Šä¼ ä¸º Artifactsï¼Œä¾› Release ä»»åŠ¡ä½¿ç”¨
      - name: Upload build artifacts
        uses: actions/upload-artifact@v3
        with:
          name: android-apk
          path: build/app/outputs/flutter-apk/app-release.apk
          retention-days: 7  # ä¿ç•™7å¤©ï¼Œè¶³å¤Ÿå®Œæˆ Release æµç¨‹

  build-windows:
    name: Build Windows
    runs-on: windows-latest  # å¿…é¡»ä½¿ç”¨ Windows ç¯å¢ƒ
    outputs:
      artifact-name: windows-zip

    steps:
      # 1. æ£€å‡ºä»£ç 
      - name: Checkout repository
        uses: actions/checkout@v3

      # 2. ç¼“å­˜ Flutter ä¾èµ–
      - name: Cache Flutter dependencies
        uses: actions/cache@v3
        with:
          path: |
            C:\Users\runneradmin\.pub-cache
            D:\a\_tool\Flutter
          key: ${{ runner.os }}-flutter-${{ hashFiles('**/pubspec.lock') }}
          restore-keys: |
            ${{ runner.os }}-flutter-

      # 3. è®¾ç½® Flutter ç¯å¢ƒ
      - name: Setup Flutter environment
        uses: subosito/flutter-action@v2
        with:
          channel: 'stable'  # ä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆæœ¬
          cache: true  # å¯ç”¨ Flutter ç¼“å­˜

      # 4. è·å–ä¾èµ–
      - name: Get Flutter dependencies
        run: flutter pub get

      # 5. æ„å»º Windows åº”ç”¨ï¼šç”Ÿæˆ Windows æ¡Œé¢åº”ç”¨
      - name: Build Windows application
        run: |
          echo "ğŸ”¨ Building Windows application..."
          flutter build windows --release
          echo "âœ… Windows application build completed"

      # 6. æ‰“åŒ… Windows åº”ç”¨ï¼šå°†ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶æ‰“åŒ…æˆ ZIP
      - name: Archive Windows release
        uses: thedoctor0/zip-release@0.7.1
        with:
          type: 'zip'
          filename: 'flutter-2048-windows.zip'
          directory: 'build/windows/x64/runner/Release'  # Windows æ„å»ºè¾“å‡ºç›®å½•

      # 7. ä¸Šä¼ æ„å»ºäº§ç‰©
      - name: Upload build artifacts
        uses: actions/upload-artifact@v3
        with:
          name: windows-zip
          path: build/windows/x64/runner/Release/flutter-2048-windows.zip
          retention-days: 7

  build-linux:
    name: Build Linux
    runs-on: ubuntu-latest  # ä½¿ç”¨ Ubuntu ç¯å¢ƒ
    outputs:
      artifact-name: linux-zip

    steps:
      # 1. æ£€å‡ºä»£ç 
      - name: Checkout repository
        uses: actions/checkout@v3

      # 2. å®‰è£… Linux æ„å»ºä¾èµ–ï¼šFlutter Linux æ¡Œé¢åº”ç”¨éœ€è¦çš„ç³»ç»Ÿåº“
      - name: Install Linux build dependencies
        run: |
          echo "ğŸ“¦ Installing Linux dependencies for Flutter desktop..."
          sudo apt-get update
          sudo apt-get install -y \
            clang \              # C++ ç¼–è¯‘å™¨ï¼ŒFlutter éœ€è¦å®ƒæ¥ç¼–è¯‘åŸç”Ÿä»£ç 
            cmake \              # æ„å»ºç³»ç»Ÿ
            ninja-build \        # å¿«é€Ÿæ„å»ºå·¥å…·
            pkg-config \         # åŒ…é…ç½®å·¥å…·ï¼Œç”¨äºæŸ¥æ‰¾åº“æ–‡ä»¶
            libgtk-3-dev \       # GTK 3 å¼€å‘åº“ï¼Œç”¨äº Linux GUI
            libglib2.0-dev \     # GLib åº“ï¼ŒGTK çš„æ ¸å¿ƒåº“
            libpango1.0-dev \    # Pango æ–‡æœ¬å¸ƒå±€åº“
            libatk1.0-dev \      # ATK å¯è®¿é—®æ€§å·¥å…·åŒ…
            libcairo-gobject2 \  # Cairo å›¾å½¢åº“
            libgdk-pixbuf2.0-dev \  # GDK Pixbuf åº“ï¼Œç”¨äºå›¾åƒå¤„ç†
            libgraphene-1.0-dev \   # Graphene å›¾å½¢åº“
            libharfbuzz-dev      # HarfBuzz æ–‡æœ¬æ•´å½¢åº“
          echo "âœ… Linux dependencies installed"

      # 3. ç¼“å­˜ Flutter ä¾èµ–
      - name: Cache Flutter dependencies
        uses: actions/cache@v3
        with:
          path: |
            ~/.pub-cache
            /opt/hostedtoolcache/Flutter
          key: ${{ runner.os }}-flutter-${{ hashFiles('**/pubspec.lock') }}
          restore-keys: |
            ${{ runner.os }}-flutter-

      # 4. è®¾ç½® Flutter ç¯å¢ƒ
      - name: Setup Flutter environment
        uses: subosito/flutter-action@v2
        with:
          channel: 'stable'  # ä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆæœ¬
          cache: true  # å¯ç”¨ Flutter ç¼“å­˜

      # 5. è·å–ä¾èµ–
      - name: Get Flutter dependencies
        run: flutter pub get

      # 6. å¯ç”¨ Linux æ¡Œé¢æ”¯æŒï¼šFlutter é»˜è®¤ä¸å¯ç”¨æ¡Œé¢æ”¯æŒ
      - name: Enable Linux desktop support
        run: flutter config --enable-linux-desktop

      # 7. æ„å»º Linux åº”ç”¨
      - name: Build Linux application
        run: |
          echo "ğŸ”¨ Building Linux application..."
          flutter build linux --release
          echo "âœ… Linux application build completed"

      # 8. æ‰“åŒ… Linux åº”ç”¨
      - name: Archive Linux release
        uses: thedoctor0/zip-release@0.7.1
        with:
          type: 'zip'
          filename: 'flutter-2048-linux.zip'
          directory: 'build/linux/x64/release/bundle'  # Linux æ„å»ºè¾“å‡ºç›®å½•

      # 9. ä¸Šä¼ æ„å»ºäº§ç‰©
      - name: Upload build artifacts
        uses: actions/upload-artifact@v3
        with:
          name: linux-zip
          path: build/linux/x64/release/bundle/flutter-2048-linux.zip
          retention-days: 7

  build-macos:
    name: Build macOS
    runs-on: macos-latest  # å¿…é¡»ä½¿ç”¨ macOS ç¯å¢ƒ
    outputs:
      artifact-name: macos-zip

    steps:
      # 1. æ£€å‡ºä»£ç 
      - name: Checkout repository
        uses: actions/checkout@v3

      # 2. ç¼“å­˜ Flutter ä¾èµ–
      - name: Cache Flutter dependencies
        uses: actions/cache@v3
        with:
          path: |
            ~/.pub-cache
            /Users/runner/hostedtoolcache/Flutter
          key: ${{ runner.os }}-flutter-${{ hashFiles('**/pubspec.lock') }}
          restore-keys: |
            ${{ runner.os }}-flutter-

      # 3. è®¾ç½® Flutter ç¯å¢ƒ
      - name: Setup Flutter environment
        uses: subosito/flutter-action@v2
        with:
          channel: 'stable'  # ä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆæœ¬
          cache: true  # å¯ç”¨ Flutter ç¼“å­˜

      # 4. è·å–ä¾èµ–
      - name: Get Flutter dependencies
        run: flutter pub get

      # 5. å¯ç”¨ macOS æ¡Œé¢æ”¯æŒ
      - name: Enable macOS desktop support
        run: flutter config --enable-macos-desktop

      # 6. [å¯é€‰] macOS ä»£ç ç­¾å - éœ€è¦é…ç½® Apple Developer è¯ä¹¦
      # é…ç½® GitHub Secretsï¼š
      # - APPLE_CERTIFICATE_BASE64: P12 è¯ä¹¦çš„ base64 ç¼–ç 
      # - APPLE_CERTIFICATE_PASSWORD: P12 è¯ä¹¦å¯†ç 
      # - PROVISIONING_PROFILE_BASE64: Provisioning Profile çš„ base64 ç¼–ç 
      - name: Import Code-Signing Certificates
        if: ${{ secrets.APPLE_CERTIFICATE_BASE64 != '' }}
        uses: Apple-Actions/import-codesign-certs@v1
        with:
          p12-file-base64: ${{ secrets.APPLE_CERTIFICATE_BASE64 }}
          p12-password: ${{ secrets.APPLE_CERTIFICATE_PASSWORD }}

      - name: Install the Provisioning Profile
        if: ${{ secrets.PROVISIONING_PROFILE_BASE64 != '' }}
        uses: Apple-Actions/install-provisioning-profile@v1
        with:
          provisioning-profile-base64: ${{ secrets.PROVISIONING_PROFILE_BASE64 }}
          provisioning-profile-path: ${{ runner.temp }}/embedded.provisionprofile

      # 7. æ„å»º macOS åº”ç”¨
      - name: Build macOS application
        run: |
          if [ "${{ secrets.APPLE_CERTIFICATE_BASE64 }}" != "" ]; then
            echo "ğŸ”¨ Building macOS application with code signing..."
            # ä½¿ç”¨ç­¾åæ„å»ºï¼Œå¹¶å¯ç”¨æ··æ·†å’Œè°ƒè¯•ä¿¡æ¯åˆ†ç¦»
            flutter build macos --release --obfuscate --split-debug-info=build/macos/Build/Products/Release/symbols
          else
            echo "ğŸ”¨ Building macOS application without code signing..."
            echo "âš ï¸  Note: Users will need to manually allow the app to run due to Gatekeeper"
            # æœªç­¾åæ„å»º
            flutter build macos --release
          fi
          echo "âœ… macOS application build completed"

      # 8. æ‰“åŒ… macOS åº”ç”¨ï¼š.app åŒ…æœ¬è´¨æ˜¯æ–‡ä»¶å¤¹ï¼Œéœ€è¦æ‰“åŒ…æˆ ZIP
      - name: Archive macOS release
        uses: thedoctor0/zip-release@0.7.1
        with:
          type: 'zip'
          filename: 'flutter-2048-macos.zip'
          directory: 'build/macos/Build/Products/Release'  # macOS æ„å»ºè¾“å‡ºç›®å½•

      # 9. ä¸Šä¼ æ„å»ºäº§ç‰©
      - name: Upload build artifacts
        uses: actions/upload-artifact@v3
        with:
          name: macos-zip
          path: build/macos/Build/Products/Release/flutter-2048-macos.zip
          retention-days: 7

  # ========================
  # æœ€åä¸€æ­¥ï¼šåˆ›å»º Release å¹¶ä¸Šä¼ æ‰€æœ‰æ„å»ºäº§ç‰©
  # ========================
  create-release:
    name: Create Release
    runs-on: ubuntu-latest  # ä½¿ç”¨ Ubuntu ç¯å¢ƒåˆ›å»º Release
    needs: [build-android, build-windows, build-linux, build-macos]

    # åªæœ‰æ‰€æœ‰æ„å»ºä»»åŠ¡éƒ½æˆåŠŸæ—¶æ‰åˆ›å»º Release
    # ä½¿ç”¨ always() ç¡®ä¿å³ä½¿æŸäº›ä»»åŠ¡å¤±è´¥ä¹Ÿä¼šæ‰§è¡Œæ­¤æ£€æŸ¥
    if: always() &&
        needs.build-android.result == 'success' &&
        needs.build-windows.result == 'success' &&
        needs.build-linux.result == 'success' &&
        needs.build-macos.result == 'success'

    steps:
      # 1. ä¸‹è½½æ‰€æœ‰æ„å»ºäº§ç‰©
      - name: Download all artifacts
        uses: actions/download-artifact@v3

      # 2. æ˜¾ç¤ºä¸‹è½½çš„æ–‡ä»¶åˆ—è¡¨ï¼ˆç”¨äºè°ƒè¯•ï¼‰
      - name: List downloaded files
        run: |
          echo "ğŸ“ Downloaded artifacts:"
          find . -type f -name "*.apk" -o -name "*.zip" | sort

      # 3. åˆ›å»º Release å¹¶ä¸Šä¼ æ‰€æœ‰ Asset
      # ä½¿ç”¨ softprops/action-gh-releaseï¼ˆç¤¾åŒºç»´æŠ¤çš„æ´»è·ƒ Actionï¼‰
      - name: Create Release and Upload Assets
        uses: softprops/action-gh-release@v1
        with:
          tag_name: ${{ github.ref_name }}  # ä½¿ç”¨æ¨é€çš„æ ‡ç­¾å
          name: Release ${{ github.ref_name }}  # Release æ ‡é¢˜
          # Release æè¿°ï¼ˆä½¿ç”¨ YAML çš„å—è¯­æ³•ä¿æŒæ ¼å¼ï¼‰
          body: |
            ## Flutter 2048 Game ${{ github.ref_name }}

            ğŸ® ä¸€ä¸ªä½¿ç”¨ Flutter å¼€å‘çš„ç»å…¸ 2048 æ•°å­—æ¸¸æˆï¼Œæ”¯æŒå¤šå¹³å°è¿è¡Œ

            ### ğŸ“± æ”¯æŒå¹³å°
            - âœ… **Android** (APK) - æ”¯æŒ Android 5.0+
            - âœ… **Windows** (Windows x64) - æ”¯æŒ Windows 10+
            - âœ… **Linux** (Linux x64) - æ”¯æŒ Ubuntu 18.04+
            - âœ… **macOS** (macOS Universal) - æ”¯æŒ macOS 10.14+
            - âœ… **Web** (æµè§ˆå™¨) - æ”¯æŒç°ä»£æµè§ˆå™¨

            ### ğŸ“¥ å®‰è£…è¯´æ˜

            **Android:**
            1. ä¸‹è½½ `flutter-2048-android.apk`
            2. åœ¨ Android è®¾å¤‡ä¸Šå®‰è£…å¹¶è¿è¡Œ
            3. é¦–æ¬¡è¿è¡Œæ—¶å¯èƒ½éœ€è¦æˆäºˆå¿…è¦çš„æƒé™

            **Windows:**
            1. ä¸‹è½½ `flutter-2048-windows.zip`
            2. è§£å‹ç¼©åˆ°ä»»æ„æ–‡ä»¶å¤¹
            3. è¿è¡Œ `flutter_2048_game.exe`
            4. é¦–æ¬¡è¿è¡Œæ—¶ Windows Defender å¯èƒ½ä¼šæç¤ºï¼Œé€‰æ‹©"ä»è¦è¿è¡Œ"

            **Linux:**
            1. ä¸‹è½½ `flutter-2048-linux.zip`
            2. è§£å‹ç¼©åˆ°ä»»æ„æ–‡ä»¶å¤¹
            3. è¿è¡Œ `flutter_2048_game`
            4. å¦‚æœæç¤ºæƒé™ä¸è¶³ï¼Œæ‰§è¡Œ `chmod +x flutter_2048_game`

            **macOS:**
            1. ä¸‹è½½ `flutter-2048-macos.zip`
            2. åŒå‡»è§£å‹ `Flutter 2048 Game.app`
            3. å¦‚æœæç¤º"æ— æ³•æ‰“å¼€"ï¼š
               - æ‰“å¼€"ç³»ç»Ÿåå¥½è®¾ç½®" > "å®‰å…¨æ€§ä¸éšç§"
               - åœ¨"é€šç”¨"æ ‡ç­¾é¡µä¸­ç‚¹å‡»"ä»è¦æ‰“å¼€"
            4. å¦‚æœ‰"å·²æŸå"æç¤ºï¼Œè¯´æ˜åº”ç”¨æœªç­¾åï¼Œè¯·æŒ‰ä¸Šè¿°æ­¥éª¤æ“ä½œ

            **Web:**
            1. æš‚æœªéƒ¨ç½² Web ç‰ˆæœ¬
            2. å¯ä»¥æœ¬åœ°è¿è¡Œä½“éªŒï¼š`flutter build web && flutter run -d chrome`

            ### ğŸ¯ æ¸¸æˆç‰¹è‰²
            - âŒ¨ï¸ **é”®ç›˜æ§åˆ¶**ï¼šä½¿ç”¨æ–¹å‘é”®ï¼ˆâ†‘â†“â†â†’ï¼‰ç§»åŠ¨æ–¹å—
            - ğŸ“± **è§¦æ‘¸æ”¯æŒ**ï¼šåœ¨è§¦æ‘¸å±ä¸Šæ»‘åŠ¨æ‰‹æŒ‡ç§»åŠ¨æ–¹å—
            - ğŸ† **åˆ†æ•°ç³»ç»Ÿ**ï¼šå®æ—¶ç»Ÿè®¡å½“å‰åˆ†æ•°å’Œå†å²æœ€é«˜åˆ†
            - ğŸ¨ **å“åº”å¼è®¾è®¡**ï¼šè‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸
            - ğŸ’¾ **è‡ªåŠ¨ä¿å­˜**ï¼šæ¸¸æˆè¿›åº¦å’Œæœ€é«˜åˆ†è‡ªåŠ¨ä¿å­˜

            ### ğŸ”§ æŠ€æœ¯æ ˆ
            - **Flutter (Latest Stable)** - è·¨å¹³å° UI æ¡†æ¶
            - **Dart** - ç¼–ç¨‹è¯­è¨€
            - **Platform Channel** - åŸç”ŸåŠŸèƒ½æ”¯æŒ

            ### ğŸ”§ å¼€å‘ä¿¡æ¯
            - **æ„å»ºæ—¶é—´**: ${{ github.event.head_commit.timestamp }}
            - **æäº¤å“ˆå¸Œ**: ${{ github.sha }}
            - **åˆ†æ”¯**: ${{ github.ref_name }}
            - **æ„å»ºå·¥å…·**: GitHub Actions

            ### ğŸ› åé¦ˆä¸æ”¯æŒ
            - é‡åˆ°é—®é¢˜ï¼Ÿè¯·æäº¤ [Issue](../../issues)
            - æ¬¢è¿è´¡çŒ®ä»£ç ï¼æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](../../blob/main/CONTRIBUTING.md)

            ---
            *ğŸ‰ æ„Ÿè°¢ä½¿ç”¨ Flutter 2048 Gameï¼*

          # è¦ä¸Šä¼ çš„æ–‡ä»¶åˆ—è¡¨ï¼Œä½¿ç”¨é€šé…ç¬¦åŒ¹é…
          files: |
            android-apk/*.apk
            windows-zip/*.zip
            linux-zip/*.zip
            macos-zip/*.zip

          draft: false  # ä¸åˆ›å»ºè‰ç¨¿ï¼Œç›´æ¥å‘å¸ƒ
          prerelease: false  # ä¸æ˜¯é¢„å‘å¸ƒç‰ˆæœ¬
          generate_release_notes: true  # è‡ªåŠ¨ç”Ÿæˆ Release Notesï¼ˆåŸºäºæäº¤å†å²ï¼‰

      # 4. æ¸…ç†æ„å»ºäº§ç‰©ï¼ˆå¯é€‰ï¼‰
      - name: Cleanup artifacts
        if: always()  # æ— è®ºæˆåŠŸå¤±è´¥éƒ½æ‰§è¡Œ
        run: |
          echo "ğŸ§¹ Cleaning up artifacts..."
          rm -rf android-apk windows-zip linux-zip macos-zip